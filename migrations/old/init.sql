
CREATE TABLE rankings (season_id VARCHAR(255) NOT NULL, updated_at DATETIME DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)', PRIMARY KEY(season_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pitches (id VARCHAR(255) NOT NULL, `label` VARCHAR(255) NOT NULL, location_longitude DOUBLE PRECISION NOT NULL, location_latitude DOUBLE PRECISION NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE seasons (id VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, state VARCHAR(255) NOT NULL, match_day_count INT NOT NULL, team_count INT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE seasons_teams_link (season_id VARCHAR(255) NOT NULL, team_id VARCHAR(255) NOT NULL, INDEX IDX_EA130B604EC001D1 (season_id), INDEX IDX_EA130B60296CD8AE (team_id), PRIMARY KEY(season_id, team_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE users (id VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, last_password_change DATETIME DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)', UNIQUE INDEX UNIQ_1483A5E9E7927C74 (email), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE users_teams_link (user_id VARCHAR(255) NOT NULL, team_id VARCHAR(255) NOT NULL, INDEX IDX_B8ACA73A76ED395 (user_id), INDEX IDX_B8ACA73296CD8AE (team_id), PRIMARY KEY(user_id, team_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE tournaments (id VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, rounds INT NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE ranking_positions (season_id VARCHAR(255) NOT NULL, team_id VARCHAR(255) NOT NULL, sort_index INT NOT NULL, number INT NOT NULL, matches INT NOT NULL, wins INT NOT NULL, draws INT NOT NULL, losses INT NOT NULL, scored_goals INT NOT NULL, conceded_goals INT NOT NULL, points INT NOT NULL, INDEX IDX_CB859A414EC001D1 (season_id), INDEX IDX_CB859A41296CD8AE (team_id), INDEX IDX_CB859A4130F55073 (sort_index), PRIMARY KEY(season_id, team_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE teams (id VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL COMMENT '(DC2Type:datetime_immutable)', PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE matches (id VARCHAR(255) NOT NULL, season_id VARCHAR(255) DEFAULT NULL, tournament_id VARCHAR(255) DEFAULT NULL, home_team_id VARCHAR(255) NOT NULL, guest_team_id VARCHAR(255) NOT NULL, pitch_id VARCHAR(255) DEFAULT NULL, match_day INT NOT NULL, kickoff DATETIME DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)', planned_for DATE DEFAULT NULL COMMENT '(DC2Type:date_immutable)', cancelled_at DATETIME DEFAULT NULL COMMENT '(DC2Type:datetime_immutable)', home_score INT DEFAULT NULL, guest_score INT DEFAULT NULL, INDEX IDX_62615BA4EC001D1 (season_id), INDEX IDX_62615BA33D1A3E7 (tournament_id), INDEX IDX_62615BA9C4C13F6 (home_team_id), INDEX IDX_62615BA69A91CE2 (guest_team_id), INDEX IDX_62615BAFEEFC64B (pitch_id), INDEX idx_season_match_day (season_id, match_day), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE rankings ADD CONSTRAINT FK_9D5DA5E64EC001D1 FOREIGN KEY (season_id) REFERENCES seasons (id);
ALTER TABLE seasons_teams_link ADD CONSTRAINT FK_EA130B604EC001D1 FOREIGN KEY (season_id) REFERENCES seasons (id);
ALTER TABLE seasons_teams_link ADD CONSTRAINT FK_EA130B60296CD8AE FOREIGN KEY (team_id) REFERENCES teams (id);
ALTER TABLE users_teams_link ADD CONSTRAINT FK_B8ACA73A76ED395 FOREIGN KEY (user_id) REFERENCES users (id);
ALTER TABLE users_teams_link ADD CONSTRAINT FK_B8ACA73296CD8AE FOREIGN KEY (team_id) REFERENCES teams (id);
ALTER TABLE ranking_positions ADD CONSTRAINT FK_CB859A414EC001D1 FOREIGN KEY (season_id) REFERENCES rankings (season_id);
ALTER TABLE ranking_positions ADD CONSTRAINT FK_CB859A41296CD8AE FOREIGN KEY (team_id) REFERENCES teams (id);
ALTER TABLE matches ADD CONSTRAINT FK_62615BA4EC001D1 FOREIGN KEY (season_id) REFERENCES seasons (id);
ALTER TABLE matches ADD CONSTRAINT FK_62615BA33D1A3E7 FOREIGN KEY (tournament_id) REFERENCES tournaments (id);
ALTER TABLE matches ADD CONSTRAINT FK_62615BA9C4C13F6 FOREIGN KEY (home_team_id) REFERENCES teams (id);
ALTER TABLE matches ADD CONSTRAINT FK_62615BA69A91CE2 FOREIGN KEY (guest_team_id) REFERENCES teams (id);
ALTER TABLE matches ADD CONSTRAINT FK_62615BAFEEFC64B FOREIGN KEY (pitch_id) REFERENCES pitches (id);
